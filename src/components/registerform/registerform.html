<form
  (ngSubmit)="onSubmit()"
  class="bg-gray-800 shadow-lg rounded-xl px-4 md:px-8 pt-6 pb-8 mb-4 w-full max-w-2xl border border-gray-700"
  #registerForm="ngForm"
>
  <div class="flex justify-center p-8">
    <img src="/logo_nobg.png" alt="logo" class="w-32" />
  </div>
  <div class="mb-4">
    <label class="block text-gray-300 text-sm font-bold mb-2" for="firstName"> Prénom </label>
    <input
      class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
      id="firstName"
      name="firstName"
      [(ngModel)]="firstName"
      #firstNameInput="ngModel"
      type="text"
      placeholder="Prénom"
      required
    />
    @if (firstNameInput.invalid && (firstNameInput.dirty || firstNameInput.touched)) {
      <div class="text-red-400 text-xs italic">
        @if (firstNameInput.errors?.['required']) {
          <div>Le prénom est obligatoire.</div>
        }
      </div>
    }
  </div>
  <div class="mb-4">
    <label class="block text-gray-300 text-sm font-bold mb-2" for="lastName">
      Nom de famille
    </label>
    <input
      class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
      id="lastName"
      name="lastName"
      [(ngModel)]="lastName"
      #lastNameInput="ngModel"
      type="text"
      placeholder="Nom de famille"
      required
    />
    @if (lastNameInput.invalid && (lastNameInput.dirty || lastNameInput.touched)) {
      <div class="text-red-400 text-xs italic">
        @if (lastNameInput.errors?.['required']) {
          <div>Le nom de famille est obligatoire.</div>
        }
      </div>
    }
  </div>
  <div class="mb-4">
    <label class="block text-gray-300 text-sm font-bold mb-2" for="email"> Adresse email </label>
    <input
      class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
      id="email"
      name="email"
      [(ngModel)]="email"
      #emailInput="ngModel"
      type="email"
      placeholder="Adresse email"
      required
      email
    />
    @if (emailInput.invalid && (emailInput.dirty || emailInput.touched)) {
      <div class="text-red-400 text-xs italic">
        @if (emailInput.errors?.['required']) {
          <div>L'adresse email est obligatoire.</div>
        }
        @if (emailInput.errors?.['email']) {
          <div>L'adresse email n'est pas valide.</div>
        }
      </div>
    }
  </div>
  <div class="mb-4">
    <label class="block text-gray-300 text-sm font-bold mb-2" for="phone"> Téléphone </label>
    <input
      class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
      id="phone"
      name="phone"
      [(ngModel)]="phone"
      #phoneInput="ngModel"
      type="tel"
      placeholder="Téléphone"
      required
      pattern="[0-9]{10}"
    />
    @if (phoneInput.invalid && (phoneInput.dirty || phoneInput.touched)) {
      <div class="text-red-400 text-xs italic">
        @if (phoneInput.errors?.['required']) {
          <div>Le téléphone est obligatoire.</div>
        }
        @if (phoneInput.errors?.['pattern']) {
          <div>Le téléphone doit contenir 10 chiffres.</div>
        }
      </div>
    }
  </div>
  <div class="mb-4">
    <label class="block text-gray-300 text-sm font-bold mb-2" for="dateOfBirth">
      Date de naissance
    </label>
    <input
      class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
      id="dateOfBirth"
      name="dateOfBirth"
      [(ngModel)]="dateOfBirth"
      #dateOfBirthInput="ngModel"
      type="date"
      required
    />
    @if (dateOfBirthInput.invalid && (dateOfBirthInput.dirty || dateOfBirthInput.touched)) {
      <div class="text-red-400 text-xs italic">
        @if (dateOfBirthInput.errors?.['required']) {
          <div>La date de naissance est obligatoire.</div>
        }
      </div>
    }
  </div>
  <div class="mb-4">
    <label class="block text-gray-300 text-sm font-bold mb-2" for="address"> Adresse </label>
    <input
      class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
      id="address"
      name="address"
      [(ngModel)]="address"
      #addressInput="ngModel"
      type="text"
      placeholder="Adresse"
      required
    />
    @if (addressInput.invalid && (addressInput.dirty || addressInput.touched)) {
      <div class="text-red-400 text-xs italic">
        @if (addressInput.errors?.['required']) {
          <div>L'adresse est obligatoire.</div>
        }
      </div>
    }
  </div>
  <div class="flex gap-4 mb-4">
    <div class="w-1/2">
      <label class="block text-gray-300 text-sm font-bold mb-2" for="postalCode">
        Code postal
      </label>
      <input
        class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
        id="postalCode"
        name="postalCode"
        [(ngModel)]="postalCode"
        #postalCodeInput="ngModel"
        type="text"
        placeholder="Code postal"
        required
        pattern="[0-9]{5}"
      />
      @if (postalCodeInput.invalid && (postalCodeInput.dirty || postalCodeInput.touched)) {
        <div class="text-red-400 text-xs italic">
          @if (postalCodeInput.errors?.['required']) {
            <div>Le code postal est obligatoire.</div>
          }
          @if (postalCodeInput.errors?.['pattern']) {
            <div>Le code postal doit contenir 5 chiffres.</div>
          }
        </div>
      }
    </div>
    <div class="w-1/2">
      <label class="block text-gray-300 text-sm font-bold mb-2" for="city"> Ville </label>
      <input
        class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
        id="city"
        name="city"
        [(ngModel)]="city"
        #cityInput="ngModel"
        type="text"
        placeholder="Ville"
        required
      />
      @if (cityInput.invalid && (cityInput.dirty || cityInput.touched)) {
        <div class="text-red-400 text-xs italic">
          @if (cityInput.errors?.['required']) {
            <div>La ville est obligatoire.</div>
          }
        </div>
      }
    </div>
  </div>
  <div class="mb-4">
    <label class="block text-gray-300 text-sm font-bold mb-2" for="country"> Pays </label>
    <select
      class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
      id="country"
      name="country"
      [(ngModel)]="country"
      #countryInput="ngModel"
      required
    >
      @for (c of countries; track c.code) {
        <option [value]="c.code">{{ c.name }}</option>
      }
    </select>
    @if (countryInput.invalid && (countryInput.dirty || countryInput.touched)) {
      <div class="text-red-400 text-xs italic">
        @if (countryInput.errors?.['required']) {
          <div>Le pays est obligatoire.</div>
        }
      </div>
    }
  </div>
  <div class="mb-6">
    <label class="block text-gray-300 text-sm font-bold mb-2" for="password"> Mot de passe </label>
    <input
      class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
      id="password"
      name="password"
      [(ngModel)]="password"
      #passwordInput="ngModel"
      type="password"
      placeholder="******************"
      required
      minlength="8"
    />
    @if (passwordInput.invalid && (passwordInput.dirty || passwordInput.touched)) {
      <div class="text-red-400 text-xs italic">
        @if (passwordInput.errors?.['required']) {
          <div>Le mot de passe est obligatoire.</div>
        }
        @if (passwordInput.errors?.['minlength']) {
          <div>Le mot de passe doit contenir au moins 8 caractères.</div>
        }
      </div>
    }
    <div class="mb-6">
      <label class="block text-gray-300 text-sm font-bold mb-2" for="confirmedpassword">
        Confirmer le mot de passe
      </label>
      <input
        class="shadow appearance-none border border-gray-600 rounded w-full py-2 px-3 text-white bg-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent placeholder-gray-400"
        id="confirmedpassword"
        name="confirmedpassword"
        [(ngModel)]="confirmedpassword"
        #confirmedPasswordInput="ngModel"
        type="password"
        placeholder="******************"
        required
      />
      @if (
        confirmedPasswordInput.invalid &&
        (confirmedPasswordInput.dirty || confirmedPasswordInput.touched)
      ) {
        <div class="text-red-400 text-xs italic">
          @if (confirmedPasswordInput.errors?.['required']) {
            <div>La confirmation du mot de passe est obligatoire.</div>
          }
        </div>
      }
      @if (
        confirmedPasswordInput.valid &&
        password !== confirmedpassword &&
        (confirmedPasswordInput.dirty || confirmedPasswordInput.touched)
      ) {
        <div class="text-red-400 text-xs italic">Les mots de passe ne correspondent pas.</div>
      }
    </div>
  </div>

  <div class="flex items-center justify-center">
    <button
      class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline cursor-pointer transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
      type="submit"
      [disabled]="registerForm.invalid"
    >
      S'inscrire
    </button>
  </div>
</form>
